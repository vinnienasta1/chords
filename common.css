/* Общие стили интерфейса */
/* Тема по умолчанию - темная (dark) */
:root,
[data-theme="dark"] {
    --bg: #0f172a;
    --panel: #0b1224;
    --accent: #667eea;
    --text: #e2e8f0;
    --muted: #94a3b8;
    --border: rgba(255,255,255,0.08);
    --shadow: 0 10px 24px rgba(0,0,0,0.35);
    --bg-gradient: linear-gradient(135deg, #0f172a 0%, #111827 60%, #0b1224 100%);
    --input-bg: rgba(255,255,255,0.04);
    --input-border: rgba(255,255,255,0.12);
    --card-bg: rgba(255,255,255,0.04);
    --backdrop: rgba(0,0,0,0.45);
    --btn-outline-text: var(--text);
    --btn-outline-border: var(--border);
}

/* Темная тема 2 - графитовый акцент */
[data-theme="dark2"] {
    --bg: #0a0e1a;
    --panel: #0f1419;
    --accent: #7a93b8d3;
    --text: #e0e7ff;
    --muted: #8b9dc7;
    --border: rgba(255,255,255,0.1);
    --shadow: 0 10px 24px rgba(0,0,0,0.4);
    --bg-gradient: linear-gradient(135deg, #0a0e1a 0%, #0f1419 60%, #1e293b 100%);
    --input-bg: rgba(255,255,255,0.05);
    --input-border: rgba(255,255,255,0.15);
    --card-bg: rgba(255,255,255,0.05);
    --backdrop: rgba(0,0,0,0.5);
    --btn-outline-text: var(--accent);
    --btn-outline-border: var(--accent);
}

/* Светлая тема 1 - синий акцент */
[data-theme="light1"] {
    --bg: #f8fafc;
    --panel: #ffffff;
    --accent: #2563eb;
    --text: #1e293b;
    --muted: #64748b;
    --border: rgba(0,0,0,0.1);
    --shadow: 0 10px 24px rgba(0,0,0,0.1);
    --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 60%, #e2e8f0 100%);
    --input-bg: #ffffff;
    --input-border: rgba(0,0,0,0.15);
    --card-bg: #ffffff;
    --backdrop: rgba(0,0,0,0.3);
    --btn-outline-text: #2563eb;
    --btn-outline-border: #2563eb;
}

/* Светлая тема 2 - фиолетовый акцент */
[data-theme="light2"] {
    --bg: #faf5ff;
    --panel: #ffffff;
    --accent: #7c3aed;
    --text: #1e1b4b;
    --muted: #6b5b95;
    --border: rgba(124,58,237,0.15);
    --shadow: 0 10px 24px rgba(124,58,237,0.1);
    --bg-gradient: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 60%, #ede9fe 100%);
    --input-bg: #ffffff;
    --input-border: rgba(124,58,237,0.2);
    --card-bg: #ffffff;
    --backdrop: rgba(124,58,237,0.2);
    --btn-outline-text: #7c3aed;
    --btn-outline-border: #7c3aed;
}

* { box-sizing: border-box; }

body {
    background: var(--bg-gradient);
    color: var(--text);
    transition: background 0.3s ease, color 0.3s ease;
}

/* Иконки (inline SVG с aria-hidden) берут цвет темы; в темных темах делаем их светлыми по умолчанию */
svg[aria-hidden="true"] {
    color: inherit;
    vertical-align: middle;
}
[data-theme="dark"] svg[aria-hidden="true"],
[data-theme="dark2"] svg[aria-hidden="true"] {
    color: var(--text);
}
/* Гарантируем перекрашивание вложенных элементов, если в SVG не проставлен fill/stroke */
svg[aria-hidden="true"] *[stroke]:not([stroke="none"]) { stroke: currentColor; }
svg[aria-hidden="true"] *[fill]:not([fill="none"]) { fill: currentColor; }
svg[aria-hidden="true"] *:not([fill]) { fill: currentColor; }

a, button, input, select, textarea {
    transition: 0.18s ease;
}

button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
a:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.btn,
button {
    border-radius: 10px;
    border: none;
    padding: 0.65rem 1rem;
    font-weight: 700;
    cursor: pointer;
    background: var(--accent);
    color: #fff;
    box-shadow: 0 6px 16px rgba(0,0,0,0.25);
}
.btn.secondary,
.btn.outline,
.btn.ghost {
    background: transparent;
    border: 1px solid var(--btn-outline-border, var(--border));
    color: var(--btn-outline-text, var(--text));
}
.btn.secondary:hover,
.btn.outline:hover,
.btn.ghost:hover {
    background: color-mix(in srgb, var(--accent) 10%, transparent);
    border-color: var(--accent);
    color: var(--accent);
}
.btn.danger {
    background: #dc3545;
}
.btn:hover,
button:hover {
    opacity: 0.9;
}

input[type='text'],
input[type='password'],
input[type='number'],
textarea,
select {
    width: 100%;
    padding: 0.7rem;
    border-radius: 10px;
    border: 1px solid var(--input-border);
    background: var(--input-bg);
    color: var(--text);
    transition: border-color 0.2s ease, background-color 0.2s ease;
}

/* Стили для элементов option внутри select */
select option {
    background: var(--input-bg);
    color: var(--text);
}

/* Для светлых тем - более явный контраст */
[data-theme="light1"] select option,
[data-theme="light2"] select option {
    background: #ffffff;
    color: var(--text);
}

.card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: var(--shadow);
    transition: background 0.3s ease, border-color 0.3s ease;
}

.sidebar {
    background: var(--panel);
    border-right: 1px solid var(--border);
    position: fixed;
    inset: 0 auto 0 0;
    width: 260px;
    transform: translateX(0);
    transition: transform 0.2s ease;
    z-index: 15;
    display: flex;
    flex-direction: column;
}
.sidebar.open { transform: translateX(0); }

.nav a {
    border: 1px solid rgba(255,255,255,0.06);
}
.nav a:focus-visible {
    border-color: var(--accent);
}

.backdrop {
    position: fixed;
    inset: 0;
    background: var(--backdrop);
    opacity: 0;
    visibility: hidden;
    transition: 0.2s ease, background 0.3s ease;
    z-index: 14;
}
.backdrop.show {
    opacity: 1;
    visibility: visible;
}

/* Мобильная адаптация */
@media (max-width: 960px) {
    .sidebar { transform: translateX(-260px); }
    .sidebar.open { transform: translateX(0); }
    
    /* Улучшенные отступы для мобильных */
    body {
        font-size: 15px;
    }
    
    .card {
        padding: 1rem;
        border-radius: 12px;
    }
    
    h1 {
        font-size: 1.75rem;
    }
    
    h2 {
        font-size: 1.5rem;
    }
    
    h3 {
        font-size: 1.25rem;
    }
    
    .btn, button {
        padding: 0.6rem 1rem;
        font-size: 0.95rem;
    }
    
    input[type='text'],
    input[type='password'],
    input[type='number'],
    textarea,
    select {
        padding: 0.65rem;
        font-size: 16px; /* Предотвращает зум на iOS */
    }
}

/* Очень маленькие экраны */
@media (max-width: 480px) {
    body {
        font-size: 14px;
    }
    
    .card {
        padding: 0.85rem;
    }
    
    h1 {
        font-size: 1.5rem;
    }
    
    h2 {
        font-size: 1.3rem;
    }
    
    .btn, button {
        padding: 0.55rem 0.9rem;
        font-size: 0.9rem;
    }
}
